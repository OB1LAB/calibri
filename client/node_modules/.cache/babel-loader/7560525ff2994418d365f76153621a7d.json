{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from\"react\";import SelectServer from\"../components/Selectors/SelectServer\";import StaffSalary from\"../components/tables/StaffSalary\";import CriteriaSalary from\"../components/criterias/CriteriaSalary\";import CriteriaViolations from\"../components/criterias/CriteriaViolations\";import Loader from\"../components/Loader/Loader\";import\"../styles/StaffSalary.css\";import{Context}from\"..\";import SalaryService from\"../services/SalaryService\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function StaffSalaryPage(){var server=\"\";var _useContext=useContext(Context),store=_useContext.store;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),staffData=_useState2[0],setStaffData=_useState2[1];if(store.user[\"dt\"][\"lvl\"]>1&&store.user[\"tmrpg\"][\"lvl\"]>1){server=\"dt\";}else{if(store.user[\"dt\"][\"lvl\"]>1){server=\"dt\";}else if(store.user[\"tmrpg\"][\"lvl\"]>1){server=\"tmrpg\";}}var _useState3=useState(server),_useState4=_slicedToArray(_useState3,2),selectedServer=_useState4[0],setselectedServer=_useState4[1];useEffect(function(){var setData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return SalaryService.fetchSalary();case 2:response=_context.sent;response&&setStaffData(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function setData(){return _ref.apply(this,arguments);};}();setData();document.title=\"Зп состава\";},[]);if(Object.keys(staffData).length===0){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsxs(\"div\",{children:[store.user[\"dt\"][\"lvl\"]>1&&store.user[\"tmrpg\"][\"lvl\"]>1&&/*#__PURE__*/_jsx(SelectServer,{onChange:function onChange(_ref2){var value=_ref2.value;setselectedServer(value);}}),/*#__PURE__*/_jsx(StaffSalary,{user:store.user,selectedServer:selectedServer,staffData:staffData[selectedServer],setData:setStaffData}),/*#__PURE__*/_jsxs(\"div\",{className:\"criteries\",children:[/*#__PURE__*/_jsx(CriteriaSalary,{}),/*#__PURE__*/_jsx(CriteriaViolations,{})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","SelectServer","StaffSalary","CriteriaSalary","CriteriaViolations","Loader","Context","SalaryService","StaffSalaryPage","server","store","staffData","setStaffData","user","selectedServer","setselectedServer","setData","fetchSalary","response","data","document","title","Object","keys","length","value"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/pages/StaffSalaryPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport SelectServer from \"../components/Selectors/SelectServer\";\r\nimport StaffSalary from \"../components/tables/StaffSalary\";\r\nimport CriteriaSalary from \"../components/criterias/CriteriaSalary\";\r\nimport CriteriaViolations from \"../components/criterias/CriteriaViolations\";\r\nimport Loader from \"../components/Loader/Loader\";\r\nimport \"../styles/StaffSalary.css\";\r\nimport { Context } from \"..\";\r\nimport SalaryService from \"../services/SalaryService\";\r\n\r\nexport default function StaffSalaryPage() {\r\n  let server = \"\";\r\n  const { store } = useContext(Context);\r\n  const [staffData, setStaffData] = useState({});\r\n\r\n  if (store.user[\"dt\"][\"lvl\"] > 1 && store.user[\"tmrpg\"][\"lvl\"] > 1) {\r\n    server = \"dt\";\r\n  } else {\r\n    if (store.user[\"dt\"][\"lvl\"] > 1) {\r\n      server = \"dt\";\r\n    } else if (store.user[\"tmrpg\"][\"lvl\"] > 1) {\r\n      server = \"tmrpg\";\r\n    }\r\n  }\r\n  const [selectedServer, setselectedServer] = useState(server);\r\n\r\n  useEffect(() => {\r\n    const setData = async () => {\r\n      const response = await SalaryService.fetchSalary();\r\n      response && setStaffData(response.data);\r\n    };\r\n    setData();\r\n    document.title = \"Зп состава\";\r\n  }, []);\r\n\r\n  if (Object.keys(staffData).length === 0) {\r\n    return <Loader />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {store.user[\"dt\"][\"lvl\"] > 1 && store.user[\"tmrpg\"][\"lvl\"] > 1 && (\r\n        <SelectServer\r\n          onChange={({ value }) => {\r\n            setselectedServer(value);\r\n          }}\r\n        />\r\n      )}\r\n      <StaffSalary\r\n        user={store.user}\r\n        selectedServer={selectedServer}\r\n        staffData={staffData[selectedServer]}\r\n        setData={setStaffData}\r\n      />\r\n      <div className=\"criteries\">\r\n        <CriteriaSalary />\r\n        <CriteriaViolations />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"8aAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAOC,aAAY,KAAM,sCAAsC,CAC/D,MAAOC,YAAW,KAAM,kCAAkC,CAC1D,MAAOC,eAAc,KAAM,wCAAwC,CACnE,MAAOC,mBAAkB,KAAM,4CAA4C,CAC3E,MAAOC,OAAM,KAAM,6BAA6B,CAChD,MAAO,2BAA2B,CAClC,OAASC,OAAO,KAAQ,IAAI,CAC5B,MAAOC,cAAa,KAAM,2BAA2B,CAAC,wFAEtD,cAAe,SAASC,gBAAe,EAAG,CACxC,GAAIC,OAAM,CAAG,EAAE,CACf,gBAAkBT,UAAU,CAACM,OAAO,CAAC,CAA7BI,KAAK,aAALA,KAAK,CACb,cAAkCX,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAAvCY,SAAS,eAAEC,YAAY,eAE9B,GAAIF,KAAK,CAACG,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,EAAIH,KAAK,CAACG,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CACjEJ,MAAM,CAAG,IAAI,CACf,CAAC,IAAM,CACL,GAAIC,KAAK,CAACG,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CAC/BJ,MAAM,CAAG,IAAI,CACf,CAAC,IAAM,IAAIC,KAAK,CAACG,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CACzCJ,MAAM,CAAG,OAAO,CAClB,CACF,CACA,eAA4CV,QAAQ,CAACU,MAAM,CAAC,yCAArDK,cAAc,eAAEC,iBAAiB,eAExCjB,SAAS,CAAC,UAAM,CACd,GAAMkB,QAAO,4FAAG,wKACST,cAAa,CAACU,WAAW,EAAE,QAA5CC,QAAQ,eACdA,QAAQ,EAAIN,YAAY,CAACM,QAAQ,CAACC,IAAI,CAAC,CAAC,sDACzC,kBAHKH,QAAO,0CAGZ,CACDA,OAAO,EAAE,CACTI,QAAQ,CAACC,KAAK,CAAG,YAAY,CAC/B,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIC,MAAM,CAACC,IAAI,CAACZ,SAAS,CAAC,CAACa,MAAM,GAAK,CAAC,CAAE,CACvC,mBAAO,KAAC,MAAM,IAAG,CACnB,CAEA,mBACE,uBACGd,KAAK,CAACG,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,EAAIH,KAAK,CAACG,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,eAC5D,KAAC,YAAY,EACX,QAAQ,CAAE,wBAAe,IAAZY,MAAK,OAALA,KAAK,CAChBV,iBAAiB,CAACU,KAAK,CAAC,CAC1B,CAAE,EAEL,cACD,KAAC,WAAW,EACV,IAAI,CAAEf,KAAK,CAACG,IAAK,CACjB,cAAc,CAAEC,cAAe,CAC/B,SAAS,CAAEH,SAAS,CAACG,cAAc,CAAE,CACrC,OAAO,CAAEF,YAAa,EACtB,cACF,aAAK,SAAS,CAAC,WAAW,wBACxB,KAAC,cAAc,IAAG,cAClB,KAAC,kBAAkB,IAAG,GAClB,GACF,CAEV"},"metadata":{},"sourceType":"module"}