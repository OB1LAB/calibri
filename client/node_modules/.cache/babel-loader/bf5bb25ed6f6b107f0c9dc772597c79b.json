{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from\"react\";import SelectServer from\"../components/Selectors/SelectServer\";import StaffList from\"../components/admin/StaffList\";import SelectAction from\"../components/Selectors/SelectAction\";import UserService from\"../services/UserService\";import{Context}from\"..\";import Logs from\"../components/admin/Logs\";import ReportEdit from\"../components/admin/ReportEdit\";import\"../styles/Admin.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminPage(){var server=\"\";var _useContext=useContext(Context),store=_useContext.store;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),staff=_useState2[0],setStaff=_useState2[1];var _useState3=useState(\"appointment\"),_useState4=_slicedToArray(_useState3,2),action=_useState4[0],setAction=_useState4[1];if(store.user[\"dt\"][\"lvl\"]>4&&store.user[\"tmrpg\"][\"lvl\"]>4){server={value:\"dt\",label:\"DraconicTech\"};}else{if(store.user[\"dt\"][\"lvl\"]>4){server={value:\"dt\",label:\"DraconicTech\"};}else if(store.user[\"tmrpg\"][\"lvl\"]>4){server={value:\"tmrpg\",label:\"TechnoMagicRPG\"};}}var _useState5=useState(server),_useState6=_slicedToArray(_useState5,2),selectedServer=_useState6[0],setselectedServer=_useState6[1];useEffect(function(){document.title=\"Админ панель\";var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UserService.fetchUsers();case 2:response=_context.sent;response&&setStaff(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"selectAction\",children:/*#__PURE__*/_jsx(SelectAction,{onChange:setAction})}),action===\"appointment\"&&/*#__PURE__*/_jsxs(\"div\",{style:{width:\"1400px\"},children:[store.user[\"dt\"][\"lvl\"]>4&&store.user[\"tmrpg\"][\"lvl\"]>4&&/*#__PURE__*/_jsx(SelectServer,{value:selectedServer,onChange:function onChange(value){setselectedServer(value);}}),/*#__PURE__*/_jsx(StaffList,{staffData:staff,user:store.user,selectedServer:selectedServer.value,setStaff:setStaff})]})||action===\"logs\"&&/*#__PURE__*/_jsx(Logs,{})||action===\"reportEdit\"&&/*#__PURE__*/_jsx(ReportEdit,{})]});}","map":{"version":3,"names":["React","useEffect","useState","useContext","SelectServer","StaffList","SelectAction","UserService","Context","Logs","ReportEdit","AdminPage","server","store","staff","setStaff","action","setAction","user","value","label","selectedServer","setselectedServer","document","title","getUsers","fetchUsers","response","data","width"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/pages/AdminPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport SelectServer from \"../components/Selectors/SelectServer\";\r\nimport StaffList from \"../components/admin/StaffList\";\r\nimport SelectAction from \"../components/Selectors/SelectAction\";\r\nimport UserService from \"../services/UserService\";\r\nimport { Context } from \"..\";\r\nimport Logs from \"../components/admin/Logs\";\r\nimport ReportEdit from \"../components/admin/ReportEdit\";\r\nimport \"../styles/Admin.css\";\r\n\r\nexport default function AdminPage() {\r\n  let server = \"\";\r\n  const { store } = useContext(Context);\r\n  const [staff, setStaff] = useState([]);\r\n  const [action, setAction] = useState(\"appointment\");\r\n\r\n  if (store.user[\"dt\"][\"lvl\"] > 4 && store.user[\"tmrpg\"][\"lvl\"] > 4) {\r\n    server = {\r\n      value: \"dt\",\r\n      label: \"DraconicTech\",\r\n    };\r\n  } else {\r\n    if (store.user[\"dt\"][\"lvl\"] > 4) {\r\n      server = {\r\n        value: \"dt\",\r\n        label: \"DraconicTech\",\r\n      };\r\n    } else if (store.user[\"tmrpg\"][\"lvl\"] > 4) {\r\n      server = {\r\n        value: \"tmrpg\",\r\n        label: \"TechnoMagicRPG\",\r\n      };\r\n    }\r\n  }\r\n  const [selectedServer, setselectedServer] = useState(server);\r\n\r\n  useEffect(() => {\r\n    document.title = \"Админ панель\";\r\n    const getUsers = async () => {\r\n      const response = await UserService.fetchUsers();\r\n      response && setStaff(response.data);\r\n    };\r\n    getUsers();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"adminPage\">\r\n      <div className=\"selectAction\">\r\n        <SelectAction onChange={setAction} />\r\n      </div>\r\n      {(action === \"appointment\" && (\r\n        <div style={{ width: \"1400px\" }}>\r\n          {store.user[\"dt\"][\"lvl\"] > 4 && store.user[\"tmrpg\"][\"lvl\"] > 4 && (\r\n            <SelectServer\r\n              value={selectedServer}\r\n              onChange={(value) => {\r\n                setselectedServer(value);\r\n              }}\r\n            />\r\n          )}\r\n          <StaffList\r\n            staffData={staff}\r\n            user={store.user}\r\n            selectedServer={selectedServer.value}\r\n            setStaff={setStaff}\r\n          />\r\n        </div>\r\n      )) ||\r\n        (action === \"logs\" && <Logs />) ||\r\n        (action === \"reportEdit\" && <ReportEdit />)}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"8aAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,MAAOC,aAAY,KAAM,sCAAsC,CAC/D,MAAOC,UAAS,KAAM,+BAA+B,CACrD,MAAOC,aAAY,KAAM,sCAAsC,CAC/D,MAAOC,YAAW,KAAM,yBAAyB,CACjD,OAASC,OAAO,KAAQ,IAAI,CAC5B,MAAOC,KAAI,KAAM,0BAA0B,CAC3C,MAAOC,WAAU,KAAM,gCAAgC,CACvD,MAAO,qBAAqB,CAAC,wFAE7B,cAAe,SAASC,UAAS,EAAG,CAClC,GAAIC,OAAM,CAAG,EAAE,CACf,gBAAkBT,UAAU,CAACK,OAAO,CAAC,CAA7BK,KAAK,aAALA,KAAK,CACb,cAA0BX,QAAQ,CAAC,EAAE,CAAC,wCAA/BY,KAAK,eAAEC,QAAQ,eACtB,eAA4Bb,QAAQ,CAAC,aAAa,CAAC,yCAA5Cc,MAAM,eAAEC,SAAS,eAExB,GAAIJ,KAAK,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,EAAIL,KAAK,CAACK,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CACjEN,MAAM,CAAG,CACPO,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,cACT,CAAC,CACH,CAAC,IAAM,CACL,GAAIP,KAAK,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CAC/BN,MAAM,CAAG,CACPO,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,cACT,CAAC,CACH,CAAC,IAAM,IAAIP,KAAK,CAACK,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,CAAE,CACzCN,MAAM,CAAG,CACPO,KAAK,CAAE,OAAO,CACdC,KAAK,CAAE,gBACT,CAAC,CACH,CACF,CACA,eAA4ClB,QAAQ,CAACU,MAAM,CAAC,yCAArDS,cAAc,eAAEC,iBAAiB,eAExCrB,SAAS,CAAC,UAAM,CACdsB,QAAQ,CAACC,KAAK,CAAG,cAAc,CAC/B,GAAMC,SAAQ,4FAAG,wKACQlB,YAAW,CAACmB,UAAU,EAAE,QAAzCC,QAAQ,eACdA,QAAQ,EAAIZ,QAAQ,CAACY,QAAQ,CAACC,IAAI,CAAC,CAAC,sDACrC,kBAHKH,SAAQ,0CAGb,CACDA,QAAQ,EAAE,CACZ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,SAAS,CAAC,WAAW,wBACxB,YAAK,SAAS,CAAC,cAAc,uBAC3B,KAAC,YAAY,EAAC,QAAQ,CAAER,SAAU,EAAG,EACjC,CACJD,MAAM,GAAK,aAAa,eACxB,aAAK,KAAK,CAAE,CAAEa,KAAK,CAAE,QAAS,CAAE,WAC7BhB,KAAK,CAACK,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,EAAIL,KAAK,CAACK,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAG,CAAC,eAC5D,KAAC,YAAY,EACX,KAAK,CAAEG,cAAe,CACtB,QAAQ,CAAE,kBAACF,KAAK,CAAK,CACnBG,iBAAiB,CAACH,KAAK,CAAC,CAC1B,CAAE,EAEL,cACD,KAAC,SAAS,EACR,SAAS,CAAEL,KAAM,CACjB,IAAI,CAAED,KAAK,CAACK,IAAK,CACjB,cAAc,CAAEG,cAAc,CAACF,KAAM,CACrC,QAAQ,CAAEJ,QAAS,EACnB,GAEL,EACEC,MAAM,GAAK,MAAM,eAAI,KAAC,IAAI,IAAI,EAC9BA,MAAM,GAAK,YAAY,eAAI,KAAC,UAAU,IAAI,GACzC,CAEV"},"metadata":{},"sourceType":"module"}