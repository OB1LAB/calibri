{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import UserService from\"../../services/UserService\";import Modal from\"../modal/Modal\";import SelectRole,{roles}from\"../Selectors/SelectRole\";import classes from\"./Admin.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlayerEdit(_ref){var playerData=_ref.playerData,user=_ref.user,selectedServer=_ref.selectedServer,name=_ref.name,setName=_ref.setName,discord=_ref.discord,setDiscord=_ref.setDiscord,role=_ref.role,setRole=_ref.setRole,balance=_ref.balance,setBalance=_ref.setBalance,birthday=_ref.birthday,setBirthday=_ref.setBirthday,modal=_ref.modal,setModal=_ref.setModal,setResponseModal=_ref.setResponseModal,setResponseData=_ref.setResponseData,setStaff=_ref.setStaff;var getUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UserService.fetchUsers();case 2:response=_context.sent;response&&setStaff(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref2.apply(this,arguments);};}();var editUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,keys;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return UserService.editUser(playerData.id,name,balance,discord,birthday,roles[role-1].name,selectedServer);case 3:getUsers();_context2.next=12;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);setResponseModal(true);response=_context2.t0.response.data.message;keys=Object.keys(response);if(keys){setResponseData({color:\"red\",content:\"\".concat(keys[0],\" \").concat(response[keys[0]])});}case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function editUser(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{visible:modal,setVisible:setModal,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContentMain,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041D\\u0438\\u043A: \"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"16\",value:name,onChange:function onChange(e){setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414\\u0441 ID: \"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"20\",value:discord,onChange:function onChange(e){setDiscord(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selector,children:/*#__PURE__*/_jsx(SelectRole,{value:role-1,setRole:setRole,maxLvl:user[\"max_role\"][\"lvl\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:balance,onChange:function onChange(e){setBalance(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414/\\u0440: \"}),/*#__PURE__*/_jsx(\"input\",{value:birthday,maxLength:\"32\",onChange:function onChange(e){return setBirthday(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.modalContent,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setModal(false);editUser();},children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})]})});}","map":{"version":3,"names":["UserService","Modal","SelectRole","roles","classes","PlayerEdit","playerData","user","selectedServer","name","setName","discord","setDiscord","role","setRole","balance","setBalance","birthday","setBirthday","modal","setModal","setResponseModal","setResponseData","setStaff","getUsers","fetchUsers","response","data","editUser","id","message","keys","Object","color","content","modalContentMain","modalContent","e","target","value","selector"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/components/admin/PlayerEdit.jsx"],"sourcesContent":["import UserService from \"../../services/UserService\";\r\nimport Modal from \"../modal/Modal\";\r\nimport SelectRole, { roles } from \"../Selectors/SelectRole\";\r\nimport classes from \"./Admin.module.css\";\r\n\r\nexport default function PlayerEdit({\r\n  playerData,\r\n  user,\r\n  selectedServer,\r\n  name,\r\n  setName,\r\n  discord,\r\n  setDiscord,\r\n  role,\r\n  setRole,\r\n  balance,\r\n  setBalance,\r\n  birthday,\r\n  setBirthday,\r\n  modal,\r\n  setModal,\r\n  setResponseModal,\r\n  setResponseData,\r\n  setStaff,\r\n}) {\r\n  const getUsers = async () => {\r\n    const response = await UserService.fetchUsers();\r\n    response && setStaff(response.data);\r\n  };\r\n\r\n  const editUser = async () => {\r\n    try {\r\n      await UserService.editUser(\r\n        playerData.id,\r\n        name,\r\n        balance,\r\n        discord,\r\n        birthday,\r\n        roles[role - 1].name,\r\n        selectedServer\r\n      );\r\n      getUsers();\r\n    } catch (err) {\r\n      setResponseModal(true);\r\n      let response = err.response.data.message;\r\n      let keys = Object.keys(response);\r\n      if (keys) {\r\n        setResponseData({\r\n          color: \"red\",\r\n          content: `${keys[0]} ${response[keys[0]]}`,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Modal visible={modal} setVisible={setModal}>\r\n        <div className={classes.modalContentMain}>\r\n          <div className={classes.modalContent}>\r\n            <h2>Ник: </h2>\r\n            <input\r\n              maxLength=\"16\"\r\n              value={name}\r\n              onChange={(e) => {\r\n                setName(e.target.value);\r\n              }}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Дс ID: </h2>\r\n            <input\r\n              maxLength=\"20\"\r\n              value={discord}\r\n              onChange={(e) => {\r\n                setDiscord(e.target.value);\r\n              }}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Роль: </h2>\r\n            <div className={classes.selector}>\r\n              <SelectRole\r\n                value={role - 1}\r\n                setRole={setRole}\r\n                maxLvl={user[\"max_role\"][\"lvl\"]}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Баланс: </h2>\r\n            <input\r\n              type=\"number\"\r\n              value={balance}\r\n              onChange={(e) => {\r\n                setBalance(e.target.value);\r\n              }}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Д/р: </h2>\r\n            <input\r\n              value={birthday}\r\n              maxLength=\"32\"\r\n              onChange={(e) => setBirthday(e.target.value)}\r\n            ></input>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={classes.modalContent}>\r\n          <button\r\n            onClick={() => {\r\n              setModal(false);\r\n              editUser();\r\n            }}\r\n          >\r\n            Сохранить\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}