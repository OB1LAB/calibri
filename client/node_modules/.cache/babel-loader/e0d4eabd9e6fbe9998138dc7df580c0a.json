{"ast":null,"code":"import _slicedToArray from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useState}from\"react\";import UserService from\"../../services/UserService\";import Modal from\"../modal/Modal\";import SelectRole,{roles}from\"../Selectors/SelectRole\";import classes from\"./Admin.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function PlayerAdd(_ref){var user=_ref.user,selectedServer=_ref.selectedServer,setResponseModal=_ref.setResponseModal,setResponseData=_ref.setResponseData,modal=_ref.modal,setModal=_ref.setModal,setStaff=_ref.setStaff;var getUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UserService.fetchUsers();case 2:response=_context.sent;response&&setStaff(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref2.apply(this,arguments);};}();var addUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,keys;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setResponseModal(true);_context2.prev=1;_context2.next=4;return UserService.addUser(name,discord,birthday,roles[role-1].name,selectedServer);case 4:setResponseData({color:\"green\",content:\"Пользователь был успешно добавлен\"});getUsers();_context2.next=13;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);response=_context2.t0.response.data.message;keys=Object.keys(response);if(keys){setResponseData({color:\"red\",content:\"\".concat(keys[0],\" \").concat(response[keys[0]])});}case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function addUser(){return _ref3.apply(this,arguments);};}();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),discord=_useState4[0],setDiscord=_useState4[1];var _useState5=useState(2),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),birthday=_useState8[0],setBirthday=_useState8[1];return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Modal,{visible:modal,setVisible:setModal,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContentMain,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041D\\u0438\\u043A: \"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"16\",value:name,onChange:function onChange(e){setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414\\u0441 ID: \"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"20\",value:discord,onChange:function onChange(e){setDiscord(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u043E\\u043B\\u044C: \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selector,children:/*#__PURE__*/_jsx(SelectRole,{value:role-1,setRole:setRole,maxLvl:user[\"max_role\"][\"lvl\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414/\\u0440: \"}),/*#__PURE__*/_jsx(\"input\",{value:birthday,maxLength:\"32\",onChange:function onChange(e){return setBirthday(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.modalContent,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setModal(false);addUser();},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"})})]})});}","map":{"version":3,"names":["useState","UserService","Modal","SelectRole","roles","classes","PlayerAdd","user","selectedServer","setResponseModal","setResponseData","modal","setModal","setStaff","getUsers","fetchUsers","response","data","addUser","name","discord","birthday","role","color","content","message","keys","Object","setName","setDiscord","setRole","setBirthday","modalContentMain","modalContent","e","target","value","selector"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/components/admin/PlayerAdd.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport UserService from \"../../services/UserService\";\r\nimport Modal from \"../modal/Modal\";\r\nimport SelectRole, { roles } from \"../Selectors/SelectRole\";\r\nimport classes from \"./Admin.module.css\";\r\n\r\nexport default function PlayerAdd({\r\n  user,\r\n  selectedServer,\r\n  setResponseModal,\r\n  setResponseData,\r\n  modal,\r\n  setModal,\r\n  setStaff,\r\n}) {\r\n  const getUsers = async () => {\r\n    const response = await UserService.fetchUsers();\r\n    response && setStaff(response.data);\r\n  };\r\n\r\n  const addUser = async () => {\r\n    setResponseModal(true);\r\n    try {\r\n      await UserService.addUser(\r\n        name,\r\n        discord,\r\n        birthday,\r\n        roles[role - 1].name,\r\n        selectedServer\r\n      );\r\n      setResponseData({\r\n        color: \"green\",\r\n        content: \"Пользователь был успешно добавлен\",\r\n      });\r\n      getUsers();\r\n    } catch (err) {\r\n      let response = err.response.data.message;\r\n      let keys = Object.keys(response);\r\n      if (keys) {\r\n        setResponseData({\r\n          color: \"red\",\r\n          content: `${keys[0]} ${response[keys[0]]}`,\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [discord, setDiscord] = useState(\"\");\r\n  const [role, setRole] = useState(2);\r\n  const [birthday, setBirthday] = useState(\"\");\r\n\r\n  return (\r\n    <div>\r\n      <Modal visible={modal} setVisible={setModal}>\r\n        <div className={classes.modalContentMain}>\r\n          <div className={classes.modalContent}>\r\n            <h2>Ник: </h2>\r\n            <input\r\n              maxLength=\"16\"\r\n              value={name}\r\n              onChange={(e) => {\r\n                setName(e.target.value);\r\n              }}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Дс ID: </h2>\r\n            <input\r\n              maxLength=\"20\"\r\n              value={discord}\r\n              onChange={(e) => {\r\n                setDiscord(e.target.value);\r\n              }}\r\n            ></input>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Роль: </h2>\r\n            <div className={classes.selector}>\r\n              <SelectRole\r\n                value={role - 1}\r\n                setRole={setRole}\r\n                maxLvl={user[\"max_role\"][\"lvl\"]}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <div className={classes.modalContent}>\r\n            <h2>Д/р: </h2>\r\n            <input\r\n              value={birthday}\r\n              maxLength=\"32\"\r\n              onChange={(e) => setBirthday(e.target.value)}\r\n            ></input>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={classes.modalContent}>\r\n          <button\r\n            onClick={() => {\r\n              setModal(false);\r\n              addUser();\r\n            }}\r\n          >\r\n            Добавить\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}