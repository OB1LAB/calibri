{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import ViolationService from\"../../services/ViolationService\";import UserService from\"../../services/UserService\";import Modal from\"../modal/Modal\";import classes from\"./Admin.module.css\";import Selector from\"../Selectors/Selector\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var options=[{value:\"easy\",label:\"Лёгкое\"},{value:\"strict\",label:\"Строгое\"},{value:\"rough\",label:\"Грубое\"},{value:\"rebuke\",label:\"Выговор\"}];export default function Violation(_ref){var modal=_ref.modal,setModal=_ref.setModal,selectedServer=_ref.selectedServer,user=_ref.user,setStaff=_ref.setStaff;var _useState=useState(new Date().toLocaleDateString().split(\".\").reverse().join(\"-\")),_useState2=_slicedToArray(_useState,2),startDay=_useState2[0],setStartDay=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),cause=_useState4[0],setCause=_useState4[1];var _useState5=useState(options[0]),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];var setUsers=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return UserService.fetchUsers();case 2:response=_context.sent;response&&setStaff(response.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function setUsers(){return _ref2.apply(this,arguments);};}();var setViolation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return ViolationService.goViolation(user.id,startDay,type.value,cause,selectedServer);case 2:setUsers();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function setViolation(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:classes.violation,children:/*#__PURE__*/_jsxs(Modal,{visible:modal,setVisible:setModal,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContentMain,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414\\u0430\\u0442\\u0430: \"}),/*#__PURE__*/_jsx(\"input\",{value:startDay,onChange:function onChange(e){return setStartDay(e.target.value);},type:\"date\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0422\\u0438\\u043F: \"}),/*#__PURE__*/_jsx(\"div\",{className:classes.selector,children:/*#__PURE__*/_jsx(Selector,{options:options,value:type,onChange:function onChange(value){return setType(value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.modalContent,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0430: \"}),/*#__PURE__*/_jsx(\"input\",{maxLength:\"256\",value:cause,onChange:function onChange(e){return setCause(e.target.value);}})]})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.modalContent,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setViolation();setModal(false);},children:\"\\u0412\\u044B\\u0434\\u0430\\u0442\\u044C \\u043D\\u0430\\u043A\\u0430\\u0437\\u0430\\u043D\\u0438\\u0435\"})})]})});}","map":{"version":3,"names":["useState","ViolationService","UserService","Modal","classes","Selector","options","value","label","Violation","modal","setModal","selectedServer","user","setStaff","Date","toLocaleDateString","split","reverse","join","startDay","setStartDay","cause","setCause","type","setType","setUsers","fetchUsers","response","data","setViolation","goViolation","id","violation","modalContentMain","modalContent","e","target","selector"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/components/admin/Violation.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport ViolationService from \"../../services/ViolationService\";\r\nimport UserService from \"../../services/UserService\";\r\nimport Modal from \"../modal/Modal\";\r\nimport classes from \"./Admin.module.css\";\r\nimport Selector from \"../Selectors/Selector\";\r\n\r\nconst options = [\r\n  { value: \"easy\", label: \"Лёгкое\" },\r\n  { value: \"strict\", label: \"Строгое\" },\r\n  { value: \"rough\", label: \"Грубое\" },\r\n  { value: \"rebuke\", label: \"Выговор\" },\r\n];\r\n\r\nexport default function Violation({\r\n  modal,\r\n  setModal,\r\n  selectedServer,\r\n  user,\r\n  setStaff,\r\n}) {\r\n  const [startDay, setStartDay] = useState(\r\n    new Date().toLocaleDateString().split(\".\").reverse().join(\"-\")\r\n  );\r\n  const [cause, setCause] = useState(\"\");\r\n  const [type, setType] = useState(options[0]);\r\n\r\n  const setUsers = async () => {\r\n    const response = await UserService.fetchUsers();\r\n    response && setStaff(response.data);\r\n  };\r\n\r\n  const setViolation = async () => {\r\n    await ViolationService.goViolation(\r\n      user.id,\r\n      startDay,\r\n      type.value,\r\n      cause,\r\n      selectedServer\r\n    );\r\n    setUsers();\r\n  };\r\n\r\n  return (\r\n    <div className={classes.violation}>\r\n      <Modal visible={modal} setVisible={setModal}>\r\n        <div className={classes.modalContentMain}>\r\n          <div className={classes.modalContent}>\r\n            <h2>Дата: </h2>\r\n            <input\r\n              value={startDay}\r\n              onChange={(e) => setStartDay(e.target.value)}\r\n              type=\"date\"\r\n            />\r\n          </div>\r\n          <div className={classes.modalContent}>\r\n            <h2>Тип: </h2>\r\n            <div className={classes.selector}>\r\n              <Selector\r\n                options={options}\r\n                value={type}\r\n                onChange={(value) => setType(value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className={classes.modalContent}>\r\n            <h2>Причина: </h2>\r\n            <input\r\n              maxLength=\"256\"\r\n              value={cause}\r\n              onChange={(e) => setCause(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={classes.modalContent}>\r\n          <button\r\n            onClick={() => {\r\n              setViolation();\r\n              setModal(false);\r\n            }}\r\n          >\r\n            Выдать наказание\r\n          </button>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}