{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import ReportService from\"../../services/ReportService\";import Selector from\"../Selectors/Selector\";import SelectServer from\"../Selectors/SelectServer\";import Modal from\"../modal/Modal\";import{Context}from\"../..\";import classes from\"./Admin.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var actions=[{value:\"Monday\",label:\"Понедельник\",number:0},{value:\"Tuesday\",label:\"Вторник\",number:1},{value:\"Wednesday\",label:\"Среда\",number:2},{value:\"Thursday\",label:\"Четверг\",number:3},{value:\"Friday\",label:\"Пятница\",number:4},{value:\"Saturday\",label:\"Суббота\",number:5},{value:\"Sunday\",label:\"Воскресенье\",number:6}];export default function ReportEdit(){var server=\"\";var _useContext=useContext(Context),store=_useContext.store;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState([0,1,2,3,4,5,6]),_useState4=_slicedToArray(_useState3,2),days=_useState4[0],setDays=_useState4[1];if(store.user[\"dt\"][\"lvl\"]>4&&store.user[\"tmrpg\"][\"lvl\"]>4){server=\"dt\";}else{if(store.user[\"dt\"][\"lvl\"]>4){server=\"dt\";}else if(store.user[\"tmrpg\"][\"lvl\"]>4){server=\"tmrpg\";}}var _useState5=useState(server),_useState6=_slicedToArray(_useState5,2),selectedServer=_useState6[0],setSelectedServer=_useState6[1];var editReport=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var reportDays;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:reportDays=days;reportDays.length===0&&(reportDays=[0,1,2,3,4,5,6]);_context.next=4;return ReportService.editReport(selectedServer,reportDays);case 4:setModal(true);case 5:case\"end\":return _context.stop();}}},_callee);}));return function editReport(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{style:{width:\"100%\"},children:[store.user[\"dt\"][\"lvl\"]>4&&store.user[\"tmrpg\"][\"lvl\"]>4&&/*#__PURE__*/_jsx(SelectServer,{onChange:function onChange(value){return setSelectedServer(value.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:classes.report,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.selector,children:/*#__PURE__*/_jsx(Selector,{options:actions,isMulti:true,closeMenuOnSelect:false,placeholder:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0434\\u043D\\u0438\",onChange:function onChange(value){return setDays(value.map(function(day){return day.number;}));}})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return editReport();},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(Modal,{visible:modal,setVisible:setModal,children:/*#__PURE__*/_jsx(\"div\",{className:classes.reportModal,children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u041E\\u0442\\u0447\\u0451\\u0442 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0438\\u0437\\u043C\\u0435\\u043D\\u0451\\u043D\"})})})]});}","map":{"version":3,"names":["React","useState","useContext","ReportService","Selector","SelectServer","Modal","Context","classes","actions","value","label","number","ReportEdit","server","store","modal","setModal","days","setDays","user","selectedServer","setSelectedServer","editReport","reportDays","length","width","report","selector","map","day","reportModal"],"sources":["C:/Users/OB1CHAM/Desktop/OB1LAB/React/calibri/client/src/components/admin/ReportEdit.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport ReportService from \"../../services/ReportService\";\r\nimport Selector from \"../Selectors/Selector\";\r\nimport SelectServer from \"../Selectors/SelectServer\";\r\nimport Modal from \"../modal/Modal\";\r\nimport { Context } from \"../..\";\r\nimport classes from \"./Admin.module.css\";\r\n\r\nconst actions = [\r\n  { value: \"Monday\", label: \"Понедельник\", number: 0 },\r\n  { value: \"Tuesday\", label: \"Вторник\", number: 1 },\r\n  { value: \"Wednesday\", label: \"Среда\", number: 2 },\r\n  { value: \"Thursday\", label: \"Четверг\", number: 3 },\r\n  { value: \"Friday\", label: \"Пятница\", number: 4 },\r\n  { value: \"Saturday\", label: \"Суббота\", number: 5 },\r\n  { value: \"Sunday\", label: \"Воскресенье\", number: 6 },\r\n];\r\n\r\nexport default function ReportEdit() {\r\n  let server = \"\";\r\n  const { store } = useContext(Context);\r\n  const [modal, setModal] = useState(false);\r\n  const [days, setDays] = useState([0, 1, 2, 3, 4, 5, 6]);\r\n\r\n  if (store.user[\"dt\"][\"lvl\"] > 4 && store.user[\"tmrpg\"][\"lvl\"] > 4) {\r\n    server = \"dt\";\r\n  } else {\r\n    if (store.user[\"dt\"][\"lvl\"] > 4) {\r\n      server = \"dt\";\r\n    } else if (store.user[\"tmrpg\"][\"lvl\"] > 4) {\r\n      server = \"tmrpg\";\r\n    }\r\n  }\r\n  const [selectedServer, setSelectedServer] = useState(server);\r\n\r\n  const editReport = async () => {\r\n    let reportDays = days;\r\n    reportDays.length === 0 && (reportDays = [0, 1, 2, 3, 4, 5, 6]);\r\n    await ReportService.editReport(selectedServer, reportDays);\r\n    setModal(true);\r\n  };\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      {store.user[\"dt\"][\"lvl\"] > 4 && store.user[\"tmrpg\"][\"lvl\"] > 4 && (\r\n        <SelectServer onChange={(value) => setSelectedServer(value.value)} />\r\n      )}\r\n      <div className={classes.report}>\r\n        <div className={classes.selector}>\r\n          <Selector\r\n            options={actions}\r\n            isMulti={true}\r\n            closeMenuOnSelect={false}\r\n            placeholder=\"Выбрать дни\"\r\n            onChange={(value) =>\r\n              setDays(\r\n                value.map((day) => {\r\n                  return day.number;\r\n                })\r\n              )\r\n            }\r\n          />\r\n        </div>\r\n        <button onClick={() => editReport()}>Изменить</button>\r\n      </div>\r\n      <Modal visible={modal} setVisible={setModal}>\r\n        <div className={classes.reportModal}>\r\n          <span>Отчёт успешно изменён</span>\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}